# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

* [`cassandra`](#cassandra): A class for installing the Cassandra package and manipulate settings in the configuration file.
* [`cassandra::apache_repo`](#cassandra--apache_repo): An optional class that will allow a suitable repository to be configured from which packages for Apache Cassandra can be downloaded.
* [`cassandra::java`](#cassandra--java): A class to install Java and JNA packages.
* [`cassandra::optutils`](#cassandra--optutils): A class to install the optional Cassandra tools package.
* [`cassandra::schema`](#cassandra--schema): A class to maintain the database schema.  Please note that cqlsh expects Python 2.7 to be installed. This may be a problem of older distributions (CentOS 6 for example).

### Defined types

* [`cassandra::file`](#cassandra--file): A defined type for altering files relative to the configuration directory.
* [`cassandra::schema::cql_type`](#cassandra--schema--cql_type): Create or drop user defined data types within the schema.
* [`cassandra::schema::index`](#cassandra--schema--index): Create or drop indexes within the schema.
* [`cassandra::schema::keyspace`](#cassandra--schema--keyspace): Create or drop keyspaces within the schema.
* [`cassandra::schema::permission`](#cassandra--schema--permission): Grant or revoke permissions. To use this class, a suitable `authenticator` (e.g. PasswordAuthenticator) and `authorizer` (e.g. CassandraAutho
* [`cassandra::schema::table`](#cassandra--schema--table): Create or drop tables within the schema.
* [`cassandra::schema::user`](#cassandra--schema--user): Create or drop users. To use this class, a suitable `authenticator` (e.g. PasswordAuthenticator) must be set in the Cassandra class.

## Classes

### <a name="cassandra"></a>`cassandra`

A class for installing the Cassandra package and manipulate settings in the
configuration file.

#### Parameters

The following parameters are available in the `cassandra` class:

* [`baseline_settings`](#-cassandra--baseline_settings)
* [`cassandra_yaml_tmpl`](#-cassandra--cassandra_yaml_tmpl)
* [`commitlog_directory`](#-cassandra--commitlog_directory)
* [`commitlog_directory_mode`](#-cassandra--commitlog_directory_mode)
* [`manage_config_file`](#-cassandra--manage_config_file)
* [`config_file_mode`](#-cassandra--config_file_mode)
* [`config_path`](#-cassandra--config_path)
* [`data_file_directories`](#-cassandra--data_file_directories)
* [`data_file_directories_mode`](#-cassandra--data_file_directories_mode)
* [`dc`](#-cassandra--dc)
* [`dc_suffix`](#-cassandra--dc_suffix)
* [`fail_on_non_supported_os`](#-cassandra--fail_on_non_supported_os)
* [`hints_directory`](#-cassandra--hints_directory)
* [`hints_directory_mode`](#-cassandra--hints_directory_mode)
* [`package_ensure`](#-cassandra--package_ensure)
* [`package_name`](#-cassandra--package_name)
* [`prefer_local`](#-cassandra--prefer_local)
* [`rack`](#-cassandra--rack)
* [`rackdc_tmpl`](#-cassandra--rackdc_tmpl)
* [`saved_caches_directory`](#-cassandra--saved_caches_directory)
* [`saved_caches_directory_mode`](#-cassandra--saved_caches_directory_mode)
* [`service_enable`](#-cassandra--service_enable)
* [`service_ensure`](#-cassandra--service_ensure)
* [`service_name`](#-cassandra--service_name)
* [`service_refresh`](#-cassandra--service_refresh)
* [`settings`](#-cassandra--settings)
* [`snitch_properties_file`](#-cassandra--snitch_properties_file)
* [`systemctl`](#-cassandra--systemctl)

##### <a name="-cassandra--baseline_settings"></a>`baseline_settings`

Data type: `hash`

If set, this is a baseline of settings that
are merged with the `settings` hash.  The values of the `settings`
hash overriding the values in this hash.  This is most useful when used
with hiera.

Default value: `{}`

##### <a name="-cassandra--cassandra_yaml_tmpl"></a>`cassandra_yaml_tmpl`

Data type: `string`

The path to the Puppet template for the
Cassandra configuration file.  This allows the user to supply their own
customized template.`

Default value: `'cassandra/cassandra.yaml.erb'`

##### <a name="-cassandra--commitlog_directory"></a>`commitlog_directory`

Data type: `string`

The path to the commitlog directory.
If set, the directory will be managed as a Puppet resource.  Do not
specify a value here and in the `settings` hash as they are mutually
exclusive.

Default value: `undef`

##### <a name="-cassandra--commitlog_directory_mode"></a>`commitlog_directory_mode`

Data type: `string`

The mode for the
`commitlog_directory` is ignored unless `commitlog_directory` is
specified.

Default value: `'0750'`

##### <a name="-cassandra--manage_config_file"></a>`manage_config_file`

Data type: `Boolean`

Whether or not to manage the cassandra configuration
file.

Default value: `true`

##### <a name="-cassandra--config_file_mode"></a>`config_file_mode`

Data type: `string`

The permissions mode of the cassandra configuration
file.

Default value: `'0644'`

##### <a name="-cassandra--config_path"></a>`config_path`

Data type: `string`

The path to the cassandra configuration file.

##### <a name="-cassandra--data_file_directories"></a>`data_file_directories`

Data type: `array`

The path(s) to the date directory or
directories.
If set, the directories will be managed as a Puppet resource.  Do not
specify a value here and in the `settings` hash as they are mutually
exclusive.

Default value: `undef`

##### <a name="-cassandra--data_file_directories_mode"></a>`data_file_directories_mode`

Data type: `string`

The mode for the
`data_file_directories` is ignored unless `data_file_directories` is
specified.

Default value: `'0750'`

##### <a name="-cassandra--dc"></a>`dc`

Data type: `string`

Sets the value for dc in *config_path*/*snitch_properties_file*
http://docs.datastax.com/en/cassandra/2.1/cassandra/architecture/architectureSnitchesAbout_c.html
for more details.

Default value: `'DC1'`

##### <a name="-cassandra--dc_suffix"></a>`dc_suffix`

Data type: `string`

Sets the value for dc_suffix in
*config_path*/*snitch_properties_file* see
http://docs.datastax.com/en/cassandra/2.1/cassandra/architecture/architectureSnitchesAbout_c.html
for more details.  If the value is *undef* then no change will be made to
the snitch properties file for this setting.

Default value: `undef`

##### <a name="-cassandra--fail_on_non_supported_os"></a>`fail_on_non_supported_os`

Data type: `boolean`

A flag that dictates if the module should
fail if it is not RedHat or Debian.  If you set this option to false then
you must also at least set the `config_path` attribute as well.

Default value: `true`

##### <a name="-cassandra--hints_directory"></a>`hints_directory`

Data type: `string`

The path to the hints directory.
If set, the directory will be managed as a Puppet resource.  Do not
specify a value here and in the `settings` hash as they are mutually
exclusive.  Do not set this option in Cassandra versions before 3.0.0.

Default value: `undef`

##### <a name="-cassandra--hints_directory_mode"></a>`hints_directory_mode`

Data type: `string`

The mode for the
`hints_directory` is ignored unless `hints_directory` is
specified.

Default value: `'0750'`

##### <a name="-cassandra--package_ensure"></a>`package_ensure`

Data type: `present|latest|string`

The status of the package specified in
**package_name**.  Can be *present*, *latest* or a specific version
number.

Default value: `'present'`

##### <a name="-cassandra--package_name"></a>`package_name`

Data type: `string`

The name of the Cassandra package which must be available
from a repository.

Default value: `'cassandra'`

##### <a name="-cassandra--prefer_local"></a>`prefer_local`

Data type: `boolean`

Sets the value for prefer_local in
*config_path*/*snitch_properties_file* see
http://docs.datastax.com/en/cassandra/2.1/cassandra/architecture/architectureSnitchesAbout_c.html
for more details.  Valid values are true, false or *undef*.  If the value
is *undef* then change will be made to the snitch properties file for
this setting.

Default value: `undef`

##### <a name="-cassandra--rack"></a>`rack`

Data type: `string`

Sets the value for rack in
*config_path*/*snitch_properties_file* see
http://docs.datastax.com/en/cassandra/2.1/cassandra/architecture/architectureSnitchesAbout_c.html
for more details.

Default value: `'RAC1'`

##### <a name="-cassandra--rackdc_tmpl"></a>`rackdc_tmpl`

Data type: `string`

The template for creating the snitch properties file.

Default value: `'cassandra/cassandra-rackdc.properties.erb'`

##### <a name="-cassandra--saved_caches_directory"></a>`saved_caches_directory`

Data type: `string`

The path to the saved caches directory.
If set, the directory will be managed as a Puppet resource.  Do not
specify a value here and in the `settings` hash as they are mutually
exclusive.

Default value: `undef`

##### <a name="-cassandra--saved_caches_directory_mode"></a>`saved_caches_directory_mode`

Data type: `string`

The mode for the
`saved_caches_directory` is ignored unless `saved_caches_directory` is
specified.

Default value: `'0750'`

##### <a name="-cassandra--service_enable"></a>`service_enable`

Data type: `boolean`

enable the Cassandra service to start at boot time.

Default value: `true`

##### <a name="-cassandra--service_ensure"></a>`service_ensure`

Data type: `string`

Ensure the Cassandra service is running.  Valid values
are running or stopped.

Default value: `undef`

##### <a name="-cassandra--service_name"></a>`service_name`

Data type: `string`

The name of the service that runs the Cassandra software.

Default value: `'cassandra'`

##### <a name="-cassandra--service_refresh"></a>`service_refresh`

Data type: `boolean`

If set to true, changes to the Cassandra config file
or the data directories will ensure that Cassandra service is refreshed
after the changes.  Setting this flag to false will disable this
behaviour, therefore allowing the changes to be made but allow the user
to control when the service is restarted.

Default value: `true`

##### <a name="-cassandra--settings"></a>`settings`

Data type: `hash`

A hash that is passed to `to_yaml` which dumps the results
to the Cassandra configuring file.  The minimum required settings for
Cassandra 2.X are as follows:

```puppet
  {
    'authenticator'               => 'PasswordAuthenticator',
    'cluster_name'                => 'MyCassandraCluster',
    'commitlog_directory'         => '/var/lib/cassandra/commitlog',
    'commitlog_sync'              => 'periodic',
    'commitlog_sync_period_in_ms' => 10000,
    'data_file_directories'       => ['/var/lib/cassandra/data'],
    'endpoint_snitch'             => 'GossipingPropertyFileSnitch',
    'listen_address'              => $::ipaddress,
    'partitioner'                 => 'org.apache.cassandra.dht.Murmur3Partitioner',
    'saved_caches_directory'      => '/var/lib/cassandra/saved_caches',
    'seed_provider'               => [
      {
        'class_name' => 'org.apache.cassandra.locator.SimpleSeedProvider',
        'parameters' => [
          {
            'seeds' => $::ipaddress,
          },
        ],
      },
    ],
    'start_native_transport'      => true,
  }
```
For Cassandra 3.X you will also need to specify the `hints_directory`
attribute.

Default value: `{}`

##### <a name="-cassandra--snitch_properties_file"></a>`snitch_properties_file`

Data type: `string`

The name of the snitch properties file.  The
full path name would be *config_path*/*snitch_properties_file*.

Default value: `'cassandra-rackdc.properties'`

##### <a name="-cassandra--systemctl"></a>`systemctl`

Data type: `string`

The full path to the systemctl command.  Only
needed when the package is installed.  Will silently continue if the
executable does not exist.

### <a name="cassandra--apache_repo"></a>`cassandra::apache_repo`

An optional class that will allow a suitable repository to be configured
from which packages for Apache Cassandra can be downloaded.

#### Parameters

The following parameters are available in the `cassandra::apache_repo` class:

* [`descr`](#-cassandra--apache_repo--descr)
* [`key_id`](#-cassandra--apache_repo--key_id)
* [`key_url`](#-cassandra--apache_repo--key_url)
* [`pkg_url`](#-cassandra--apache_repo--pkg_url)
* [`release`](#-cassandra--apache_repo--release)

##### <a name="-cassandra--apache_repo--descr"></a>`descr`

Data type: `string`

On the Red Hat family, this is passed as the `descr`
attribute to a `yumrepo` resource.  On the Debian family, it is passed as
the `comment` attribute to an `apt::source` resource.

Default value: `'Repo for Apache Cassandra'`

##### <a name="-cassandra--apache_repo--key_id"></a>`key_id`

Data type: `string`

On the Debian family, this is passed as the `id`
attribute to an `apt::key` resource.  On the Red Hat family, it is
ignored.

Default value: `'A26E528B271F19B9E5D8E19EA278B781FE4B2BDA'`

##### <a name="-cassandra--apache_repo--key_url"></a>`key_url`

Data type: `string`

On the Debian family, this is passed as the
`source` attribute to an `apt::key` resource.  On the Red Hat family,
it is set to the `gpgkey` attribute on the `yumrepo` resource.

Default value: `'https://www.apache.org/dist/cassandra/KEYS'`

##### <a name="-cassandra--apache_repo--pkg_url"></a>`pkg_url`

Data type: `string`

On the Red Hat family, leaving this as default will
set the `baseurl` on the `yumrepo` resource to
'http://www.apache.org/dist/cassandra/redhat' with whatever is set in the
'release' attribute appended.
On the Debian family, leaving this as the default
will set the `location` attribute on an `apt::source` to
'http://www.apache.org/dist/cassandra/debian'.

Default value: `undef`

##### <a name="-cassandra--apache_repo--release"></a>`release`

Data type: `string`

On the Debian family, this is passed as the `release`
attribute to an `apt::source` resource.  On the Red Hat family, it is the
major version number of Cassandra, without dot, and with an appended 'x'
(e.g. '311x')

Default value: `'main'`

### <a name="cassandra--java"></a>`cassandra::java`

A class to install Java and JNA packages.

#### Parameters

The following parameters are available in the `cassandra::java` class:

* [`aptkey`](#-cassandra--java--aptkey)
* [`aptsource`](#-cassandra--java--aptsource)
* [`jna_ensure`](#-cassandra--java--jna_ensure)
* [`jna_package_name`](#-cassandra--java--jna_package_name)
* [`package_ensure`](#-cassandra--java--package_ensure)
* [`package_name`](#-cassandra--java--package_name)
* [`yumrepo`](#-cassandra--java--yumrepo)

##### <a name="-cassandra--java--aptkey"></a>`aptkey`

Data type: `hash`

If supplied, this should be a hash of `apt::key`
resources that will be passed to the create_resources function.
This is ignored on non-Debian systems.

Default value: `undef`

##### <a name="-cassandra--java--aptsource"></a>`aptsource`

Data type: `hash`

If supplied, this should be a hash of
`apt::source` resources that will be passed to the create_resources
function.  This is ignored on non-Red Hat`

Default value: `undef`

##### <a name="-cassandra--java--jna_ensure"></a>`jna_ensure`

Data type: `string`

Is passed to the package reference for the JNA
package.  Valid values are `present` or a version number.

Default value: `present`

##### <a name="-cassandra--java--jna_package_name"></a>`jna_package_name`

Data type: `string`

The name of the JNA package.

##### <a name="-cassandra--java--package_ensure"></a>`package_ensure`

Data type: `string`

Is passed to the package reference for the JRE/JDK
package.  Valid values are `present` or a version number.

Default value: `present`

##### <a name="-cassandra--java--package_name"></a>`package_name`

Data type: `string`

The name of the Java package to be installed.

##### <a name="-cassandra--java--yumrepo"></a>`yumrepo`

Data type: `hash`

If supplied, this should be a hash of *yumrepo*
resources that will be passed to the create_resources function.
This is ignored on non-Red Hat systems.

Default value: `undef`

### <a name="cassandra--optutils"></a>`cassandra::optutils`

A class to install the optional Cassandra tools package.

#### Parameters

The following parameters are available in the `cassandra::optutils` class:

* [`package_ensure`](#-cassandra--optutils--package_ensure)
* [`package_name`](#-cassandra--optutils--package_name)

##### <a name="-cassandra--optutils--package_ensure"></a>`package_ensure`

Data type: `string`

Can be `present`, `latest` or a specific
version number.

Default value: `'present'`

##### <a name="-cassandra--optutils--package_name"></a>`package_name`

Data type: `string`

The name of the optional utilities package to
be installed.

Default value: `'cassandra-tools'`

### <a name="cassandra--schema"></a>`cassandra::schema`

A class to maintain the database schema.  Please note that cqlsh expects Python 2.7 to be installed. This may be a problem of older distributions (CentOS 6 for example).

#### Parameters

The following parameters are available in the `cassandra::schema` class:

* [`connection_tries`](#-cassandra--schema--connection_tries)
* [`connection_try_sleep`](#-cassandra--schema--connection_try_sleep)
* [`cql_types`](#-cassandra--schema--cql_types)
* [`cqlsh_additional_options`](#-cassandra--schema--cqlsh_additional_options)
* [`cqlsh_client_config`](#-cassandra--schema--cqlsh_client_config)
* [`cqlsh_client_tmpl`](#-cassandra--schema--cqlsh_client_tmpl)
* [`cqlsh_command`](#-cassandra--schema--cqlsh_command)
* [`cqlsh_host`](#-cassandra--schema--cqlsh_host)
* [`cqlsh_password`](#-cassandra--schema--cqlsh_password)
* [`cqlsh_port`](#-cassandra--schema--cqlsh_port)
* [`cqlsh_user`](#-cassandra--schema--cqlsh_user)
* [`indexes`](#-cassandra--schema--indexes)
* [`keyspaces`](#-cassandra--schema--keyspaces)
* [`permissions`](#-cassandra--schema--permissions)
* [`tables`](#-cassandra--schema--tables)
* [`users`](#-cassandra--schema--users)

##### <a name="-cassandra--schema--connection_tries"></a>`connection_tries`

Data type: `integer`

How many times do try to connect to
Cassandra.  See also `connection_try_sleep`.

Default value: `6`

##### <a name="-cassandra--schema--connection_try_sleep"></a>`connection_try_sleep`

Data type: `integer`

How much time to allow between the
number of tries specified in `connection_tries`.

Default value: `30`

##### <a name="-cassandra--schema--cql_types"></a>`cql_types`

Data type: `hash`

Creates new `cassandra::schema::cql_type` resources.

Default value: `{}`

##### <a name="-cassandra--schema--cqlsh_additional_options"></a>`cqlsh_additional_options`

Data type: `string`

Any additional options to be passed
to the `cqlsh` command.

Default value: `''`

##### <a name="-cassandra--schema--cqlsh_client_config"></a>`cqlsh_client_config`

Data type: `string`

Set this to a file name
(e.g. '/root/.puppetcqlshrc') that will then be used to contain the
the credentials for connecting to Cassandra. This is a more secure option
than having the credentials appearing on the command line.  This option
is only available in Cassandra >= 2.1.

Default value: `undef`

##### <a name="-cassandra--schema--cqlsh_client_tmpl"></a>`cqlsh_client_tmpl`

Data type: `string`

The location of the template for configuring
the credentials for the cqlsh client.  This is ignored unless
`cqlsh_client_config` is set.

Default value: `'cassandra/cqlshrc.erb'`

##### <a name="-cassandra--schema--cqlsh_command"></a>`cqlsh_command`

Data type: `string`

The full path to the `cqlsh` command.

Default value: `'/usr/bin/cqlsh'`

##### <a name="-cassandra--schema--cqlsh_host"></a>`cqlsh_host`

Data type: `string`

The host for the `cqlsh` command to connect to.
See also `cqlsh_port`.

Default value: `'localhost'`

##### <a name="-cassandra--schema--cqlsh_password"></a>`cqlsh_password`

Data type: `string`

If credentials are require for connecting,
specify the password here.  See also `cqlsh_user`, `cqlsh_client_config`.

Default value: `undef`

##### <a name="-cassandra--schema--cqlsh_port"></a>`cqlsh_port`

Data type: `integer`

The host for the `cqlsh` command to connect to.
See also `cqlsh_host`.

Default value: `9042`

##### <a name="-cassandra--schema--cqlsh_user"></a>`cqlsh_user`

Data type: `string`

If credentials are required for connecting,
specify the password here. See also `cqlsh_password`,
`cqlsh_client_config`

Default value: `'cassandra'`

##### <a name="-cassandra--schema--indexes"></a>`indexes`

Data type: `hash`

Creates new `cassandra::schema::index` resources.

Default value: `{}`

##### <a name="-cassandra--schema--keyspaces"></a>`keyspaces`

Data type: `hash`

Creates new `cassandra::schema::keyspace` resources.

Default value: `{}`

##### <a name="-cassandra--schema--permissions"></a>`permissions`

Data type: `hash`

Creates new `cassandra::schema::permission`
resources.

Default value: `{}`

##### <a name="-cassandra--schema--tables"></a>`tables`

Data type: `hash`

Creates new `cassandra::schema::table` resources.

Default value: `{}`

##### <a name="-cassandra--schema--users"></a>`users`

Data type: `hash`

Creates new `cassandra::schema::user` resources.

Default value: `{}`

## Defined types

### <a name="cassandra--file"></a>`cassandra::file`

A defined type for altering files relative to the configuration directory.

#### Examples

##### 

```puppet
if $::memorysize_mb < 24576.0 {
  $max_heap_size_in_mb = floor($::memorysize_mb / 2)
} elsif $::memorysize_mb < 8192.0 {
  $max_heap_size_in_mb = floor($::memorysize_mb / 4)
} else {
  $max_heap_size_in_mb = 8192
}

$heap_new_size = $::processorcount * 100

cassandra::file { "Set Java/Cassandra max heap size to ${max_heap_size_in_mb}.":
  file       => 'cassandra-env.sh',
  file_lines => {
    'MAX_HEAP_SIZE' => {
      line  => "MAX_HEAP_SIZE='${max_heap_size_in_mb}M'",
      match => '^#?MAX_HEAP_SIZE=.*',
    },
  }
}

cassandra::file { "Set Java/Cassandra heap new size to ${heap_new_size}.":
  file       => 'cassandra-env.sh',
  file_lines => {
    'HEAP_NEWSIZE'  => {
      line  => "HEAP_NEWSIZE='${heap_new_size}M'",
      match => '^#?HEAP_NEWSIZE=.*',
    }
  }
}
$tmpdir = '/var/lib/cassandra/tmp'

file { $tmpdir:
  ensure => directory,
  owner  => 'cassandra',
  group  => 'cassandra',
}

cassandra::file { 'Set java.io.tmpdir':
  file       => 'jvm.options',
  file_lines => {
    'java.io.tmpdir' => {
      line => "-Djava.io.tmpdir=${tmpdir}",
    },
  },
  require    => File[$tmpdir],
}
```

#### Parameters

The following parameters are available in the `cassandra::file` defined type:

* [`file`](#-cassandra--file--file)
* [`config_path`](#-cassandra--file--config_path)
* [`file_lines`](#-cassandra--file--file_lines)
* [`service_refresh`](#-cassandra--file--service_refresh)

##### <a name="-cassandra--file--file"></a>`file`

Data type: `string`

The name of the file relative to the `config_path`.

Default value: `$title`

##### <a name="-cassandra--file--config_path"></a>`config_path`

Data type: `string`

The path to the configuration directory.

Default value: `$cassandra::config_path`

##### <a name="-cassandra--file--file_lines"></a>`file_lines`

Data type: `string`

If set, then the [create_resources]
(https://docs.puppet.com/puppet/latest/reference/function.html#createresources)
will be used to create an array of [file_line]
(https://forge.puppet.com/puppetlabs/stdlib#file_line) resources.

Default value: `undef`

##### <a name="-cassandra--file--service_refresh"></a>`service_refresh`

Data type: `boolean`

Is the Cassandra service is to be notified
if the environment file is changed.

Default value: `true`

### <a name="cassandra--schema--cql_type"></a>`cassandra::schema::cql_type`

Create or drop user defined data types within the schema.

#### Examples

##### 

```puppet
cassandra::schema::cql_type { 'fullname':
  keyspace => 'mykeyspace',
  fields   => {
    'fname' => 'text',
    'lname' => 'text',
  },
}
```

#### Parameters

The following parameters are available in the `cassandra::schema::cql_type` defined type:

* [`keyspace`](#-cassandra--schema--cql_type--keyspace)
* [`ensure`](#-cassandra--schema--cql_type--ensure)
* [`fields`](#-cassandra--schema--cql_type--fields)
* [`cql_type_name`](#-cassandra--schema--cql_type--cql_type_name)

##### <a name="-cassandra--schema--cql_type--keyspace"></a>`keyspace`

Data type: `string`

The name of the keyspace that the data type is to be associated with.

##### <a name="-cassandra--schema--cql_type--ensure"></a>`ensure`

Data type: `present|absent`

ensure the data type is created, or is dropped.

Default value: `present`

##### <a name="-cassandra--schema--cql_type--fields"></a>`fields`

Data type: `hash`

A hash of the fields that will be components for the data type.

Default value: `{}`

##### <a name="-cassandra--schema--cql_type--cql_type_name"></a>`cql_type_name`

Data type: `string`

The name of the CQL type to be created.

Default value: `$title`

### <a name="cassandra--schema--index"></a>`cassandra::schema::index`

Create or drop indexes within the schema.

#### Parameters

The following parameters are available in the `cassandra::schema::index` defined type:

* [`ensure`](#-cassandra--schema--index--ensure)
* [`class_name`](#-cassandra--schema--index--class_name)
* [`index`](#-cassandra--schema--index--index)
* [`keys`](#-cassandra--schema--index--keys)
* [`keyspace`](#-cassandra--schema--index--keyspace)
* [`options`](#-cassandra--schema--index--options)
* [`table`](#-cassandra--schema--index--table)

##### <a name="-cassandra--schema--index--ensure"></a>`ensure`

Data type: `present|absent`

Create or dro[ the index.

Default value: `present`

##### <a name="-cassandra--schema--index--class_name"></a>`class_name`

Data type: `string`

The name of the class to be associated with an
index when creating a custom index.

Default value: `undef`

##### <a name="-cassandra--schema--index--index"></a>`index`

Data type: `string`

The name of the index.  Defaults to the name of the
resource.

Default value: `$title`

##### <a name="-cassandra--schema--index--keys"></a>`keys`

Data type: `string`

The columns that the index is being created on.

Default value: `undef`

##### <a name="-cassandra--schema--index--keyspace"></a>`keyspace`

Data type: `string`

The name the keyspace that the index is to be associated
with.

##### <a name="-cassandra--schema--index--options"></a>`options`

Data type: `string`

Any options to be added to the index.

Default value: `undef`

##### <a name="-cassandra--schema--index--table"></a>`table`

Data type: `string`

The name of the table that the index is to be associated with.

### <a name="cassandra--schema--keyspace"></a>`cassandra::schema::keyspace`

Create or drop keyspaces within the schema.

#### Examples

##### 

```puppet
$network_topology_strategy = {
  keyspace_class => 'NetworkTopologyStrategy',
    dc1            => 3,
    dc2            => 2
}
```

##### 

```puppet
cassandra::schema::keyspace { 'mykeyspace':
  replication_map => {
    keyspace_class     => 'SimpleStrategy',
    replication_factor => 1,
  },
  durable_writes  => false,
}
```

#### Parameters

The following parameters are available in the `cassandra::schema::keyspace` defined type:

* [`ensure`](#-cassandra--schema--keyspace--ensure)
* [`durable_writes`](#-cassandra--schema--keyspace--durable_writes)
* [`keyspace_name`](#-cassandra--schema--keyspace--keyspace_name)
* [`replication_map`](#-cassandra--schema--keyspace--replication_map)

##### <a name="-cassandra--schema--keyspace--ensure"></a>`ensure`

Data type: `present|absent`

Create or drop the keyspace.

Default value: `present`

##### <a name="-cassandra--schema--keyspace--durable_writes"></a>`durable_writes`

Data type: `boolean`

When set to false, data written to the
keyspace bypasses the commit log. Be careful using this option
because you risk losing data. Set this attribute to false on a keyspace
using the SimpleStrategy.

Default value: `true`

##### <a name="-cassandra--schema--keyspace--keyspace_name"></a>`keyspace_name`

Data type: `string`

The name of the keyspace to be created.

Default value: `$title`

##### <a name="-cassandra--schema--keyspace--replication_map"></a>`replication_map`

Data type: `hash`

Needed if the keyspace is to be present.
Optional if it is to be absent.

Default value: `{}`

### <a name="cassandra--schema--permission"></a>`cassandra::schema::permission`

Grant or revoke permissions.
To use this class, a suitable `authenticator` (e.g. PasswordAuthenticator)
and `authorizer` (e.g. CassandraAuthorizer) must be set in the Cassandra
class.

WARNING: Specifying keyspace 'ALL' and 'ALL' for permissions at the same
time is not currently supported by this module.

#### Parameters

The following parameters are available in the `cassandra::schema::permission` defined type:

* [`user_name`](#-cassandra--schema--permission--user_name)
* [`ensure`](#-cassandra--schema--permission--ensure)
* [`keyspace_name`](#-cassandra--schema--permission--keyspace_name)
* [`permission_name`](#-cassandra--schema--permission--permission_name)
* [`table_name`](#-cassandra--schema--permission--table_name)

##### <a name="-cassandra--schema--permission--user_name"></a>`user_name`

Data type: `string`

The name of the user who is to be granted or
revoked.

##### <a name="-cassandra--schema--permission--ensure"></a>`ensure`

Data type: `present | absent`

Set to present to grant a permission or
absent to revoke it.

Default value: `present`

##### <a name="-cassandra--schema--permission--keyspace_name"></a>`keyspace_name`

Data type: `string`

The name of the keyspace to grant/revoke the
permissions on.  If set to 'ALL' then the permission will be applied to
all of the keyspaces.

Default value: `'ALL'`

##### <a name="-cassandra--schema--permission--permission_name"></a>`permission_name`

Data type: `string`

Can be one of the following:

* 'ALTER' - ALTER KEYSPACE, ALTER TABLE, CREATE INDEX, DROP INDEX.
* 'AUTHORIZE' - GRANT, REVOKE.
* 'CREATE' - CREATE KEYSPACE, CREATE TABLE.
* 'DROP' - DROP KEYSPACE, DROP TABLE.
* 'MODIFY' - INSERT, DELETE, UPDATE, TRUNCATE.
* 'SELECT' - SELECT.

If the permission_name is set to 'ALL', this will set all of the specific
permissions listed.

Default value: `'ALL'`

##### <a name="-cassandra--schema--permission--table_name"></a>`table_name`

Data type: `string`

The name of a table within the specified
keyspace.  If left unspecified, the procedure will be applied to all
tables within the keyspace.

Default value: `undef`

### <a name="cassandra--schema--table"></a>`cassandra::schema::table`

Create or drop tables within the schema.

#### Examples

##### 

```puppet
cassandra::schema::table { 'users':
  keyspace => 'mykeyspace',
  columns  => {
    'userid'      => 'int',
    'fname'       => 'text',
    'lname'       => 'text',
    'PRIMARY KEY' => '(userid)',
  },
}
```

#### Parameters

The following parameters are available in the `cassandra::schema::table` defined type:

* [`keyspace`](#-cassandra--schema--table--keyspace)
* [`columns`](#-cassandra--schema--table--columns)
* [`ensure`](#-cassandra--schema--table--ensure)
* [`options`](#-cassandra--schema--table--options)
* [`table`](#-cassandra--schema--table--table)

##### <a name="-cassandra--schema--table--keyspace"></a>`keyspace`

Data type: `string`

The name of the keyspace.

##### <a name="-cassandra--schema--table--columns"></a>`columns`

Data type: `hash`

A hash of the columns to be placed in the table.
Optional if the table is to be absent.

Default value: `{}`

##### <a name="-cassandra--schema--table--ensure"></a>`ensure`

Data type: `present|absent`

Ensure a keyspace is created or dropped.

Default value: `present`

##### <a name="-cassandra--schema--table--options"></a>`options`

Data type: `array`

Options to be added to the table creation.

Default value: `[]`

##### <a name="-cassandra--schema--table--table"></a>`table`

Data type: `string`

The name of the table.  Defaults to the name of the
resource.

Default value: `$title`

### <a name="cassandra--schema--user"></a>`cassandra::schema::user`

Create or drop users.
To use this class, a suitable `authenticator` (e.g. PasswordAuthenticator)
must be set in the Cassandra class.

#### Examples

##### 

```puppet
cassandra::schema::user { 'akers':
  password  => 'Niner2',
  superuser => true,
}

cassandra::schema::user { 'lucan':
  ensure => absent,
}
```

#### Parameters

The following parameters are available in the `cassandra::schema::user` defined type:

* [`ensure`](#-cassandra--schema--user--ensure)
* [`password`](#-cassandra--schema--user--password)
* [`superuser`](#-cassandra--schema--user--superuser)
* [`login`](#-cassandra--schema--user--login)
* [`user_name`](#-cassandra--schema--user--user_name)

##### <a name="-cassandra--schema--user--ensure"></a>`ensure`

Data type: `present | absent`

Valid values can be **present** to
ensure a user is created, or **absent** to remove the user if it exists.

Default value: `present`

##### <a name="-cassandra--schema--user--password"></a>`password`

Data type: `string`

A password for the user.

Default value: `undef`

##### <a name="-cassandra--schema--user--superuser"></a>`superuser`

Data type: `boolean`

If the user is to be a super-user on the system.

Default value: `false`

##### <a name="-cassandra--schema--user--login"></a>`login`

Data type: `boolean`

Allows the role to log in.

Default value: `true`

##### <a name="-cassandra--schema--user--user_name"></a>`user_name`

Data type: `string`

The name of the user.

Default value: `$title`

